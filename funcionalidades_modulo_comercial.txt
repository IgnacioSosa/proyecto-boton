Resumen de Funcionalidades del Módulo Comercial (commercial_projects.py)
=========================================================================

Este módulo gestiona el ciclo de vida de los proyectos comerciales, clientes y contactos dentro de la aplicación. A continuación se detallan sus principales capacidades:

1. Gestión de Proyectos Comerciales
-----------------------------------
- **Creación de Proyectos:**
  - Formulario detallado con campos para: Título, Valor (con auto-formato de miles), Moneda (ARS/USD), Tipo de Venta, Marca, Fecha de Cierre estimada, Probabilidad, Estado y Descripción.
  - **Selección de Cliente:** Permite elegir clientes existentes o utilizar la función de "Carga Manual" para solicitar el alta de uno nuevo sin salir del formulario.
  - **Asignación de Contactos:** Vinculación directa con contactos asociados al cliente o la marca seleccionada.
  - **Documentación Inicial:** Posibilidad de adjuntar múltiples archivos PDF al crear el proyecto.
  - **Colaboración Inicial:** Opción para compartir el proyecto con otros usuarios (roles comerciales) desde el momento de la creación.

- **Mis Proyectos (Gestión y Edición):**
  - **Visualización:** Listado en formato de tarjetas con indicadores visuales de estado (colores semánticos para Prospecto, Ganado, Perdido, etc.).
  - **Filtros:** Búsqueda avanzada por Cliente, Nombre del Proyecto y Estado.
  - **Paginación:** Navegación optimizada para listas largas de proyectos.
  - **Edición Completa:** Capacidad para modificar todos los datos del proyecto.
  - **Gestión de Documentos:** 
    - Subida de nuevos PDFs.
    - Descarga de archivos.
    - **Previsualización:** Visor de PDF integrado (embebido) y generación de enlaces para vista previa en pestaña nueva.
    - Eliminación de documentos adjuntos.
  - **Gestión de Compartidos:** Agregar o quitar colaboradores del proyecto en cualquier momento.
  - **Eliminación:** Opción para borrar proyectos propios (con cuadro de diálogo de confirmación).

- **Proyectos Compartidos Conmigo:**
  - Acceso a proyectos creados por otros usuarios donde se ha sido invitado.
  - Filtros específicos incluyendo "Compartido por" (autor).
  - Vista de "Solo Lectura": Acceso a todos los detalles y documentos, pero sin permisos de edición o borrado.

2. Gestión de Contactos
-----------------------
- **Directorio de Contactos:**
  - Visualización de contactos filtrada por entidad (Cliente o Marca).
  - Tarjetas de contacto con acceso rápido a teléfono, email y puesto.
- **ABM de Contactos (Alta, Baja, Modificación):**
  - **Creación:** Formulario para dar de alta nuevos contactos vinculados a un Cliente o una Marca.
  - **Edición:** Modificación de datos personales y de contacto.
  - **Eliminación Segura:** El sistema valida si el contacto está asociado a proyectos antes de permitir su eliminación, previniendo inconsistencias.

3. Gestión de Clientes (Integrada en Flujos)
--------------------------------------------
- **Visualización de Datos:** Al seleccionar un cliente en los formularios, se muestran tarjetas informativas con sus datos clave (CUIT, Web, Teléfono, Email).
- **Solicitud de Alta (Carga Manual):**
  - Diálogo modal para cargar datos de un cliente no existente.
  - Validaciones de formato para CUIT, Email y URL Web.
  - Detección de duplicados antes de enviar la solicitud.

4. Características Técnicas y de Interfaz (UI/UX)
-------------------------------------------------
- **Navegación por Pestañas:** Organización clara en "Crear Proyecto", "Mis Proyectos", "Compartidos" y "Contactos".
- **Persistencia de Estado:** Uso de `session_state` para mantener filtros, selecciones y datos de formularios activos durante la navegación.
- **Estilos Personalizados:** Interfaz enriquecida con CSS para tarjetas de proyecto, píldoras de estado y formularios compactos.
- **Descargas:** Generación de botones de descarga directa para documentos almacenados.
